# SiteGuard Production Environment Configuration Template
# Copy this file to .env and update the values for your deployment

# =============================================================================
# APPLICATION CONFIGURATION
# =============================================================================
NODE_ENV=production
PORT=3000

# =============================================================================
# API SERVER PORTS
# =============================================================================
MEDIA_SERVER_PORT=3001
ONVIF_SERVER_PORT=3002
NETWORK_SERVER_PORT=3003
SECURITY_SERVER_PORT=3004

# =============================================================================
# DATABASE CONFIGURATION (Supabase)
# =============================================================================
# Get these values from your Supabase project dashboard
SUPABASE_URL=https://your-project-id.supabase.co
SUPABASE_ANON_KEY=your_supabase_anon_key_here
SUPABASE_SERVICE_ROLE_KEY=your_supabase_service_role_key_here

# Database connection settings
DB_POOL_MIN=2
DB_POOL_MAX=10
DB_TIMEOUT=30000

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================
# These will be auto-generated during deployment, but you can customize them
JWT_SECRET=your_jwt_secret_here_minimum_32_characters
ENCRYPTION_KEY=your_encryption_key_here_minimum_32_characters
SESSION_SECRET=your_session_secret_here_minimum_32_characters

# Password hashing rounds (higher = more secure but slower)
BCRYPT_ROUNDS=12

# Session configuration
SESSION_TIMEOUT=3600000  # 1 hour in milliseconds
REMEMBER_ME_TIMEOUT=2592000000  # 30 days in milliseconds

# Rate limiting
RATE_LIMIT_WINDOW=900000  # 15 minutes in milliseconds
RATE_LIMIT_MAX_REQUESTS=100

# =============================================================================
# MEDIA CONFIGURATION
# =============================================================================
# Recording storage
RECORDINGS_PATH=/opt/siteguard/recordings
MAX_RECORDING_SIZE=10GB
RECORDING_RETENTION_DAYS=30

# Streaming configuration
STREAM_QUALITY=high  # low, medium, high, ultra
STREAM_BITRATE=2000  # kbps
STREAM_FPS=30
STREAM_RESOLUTION=1920x1080

# HLS configuration
HLS_SEGMENT_DURATION=10  # seconds
HLS_PLAYLIST_SIZE=5      # number of segments

# Media server settings
MEDIA_SERVER_HOST=0.0.0.0
RTMP_PORT=1935
HTTP_MEDIA_PORT=8000

# =============================================================================
# NETWORK CONFIGURATION
# =============================================================================
# ZeroTier network management
ZEROTIER_NETWORK_ID=your_zerotier_network_id_here
ZEROTIER_API_TOKEN=your_zerotier_api_token_here
ZEROTIER_CONTROLLER_URL=https://my.zerotier.com

# VPN configuration
VPN_ENABLED=true
VPN_TYPE=zerotier  # zerotier, wireguard, openvpn

# Network discovery
NETWORK_SCAN_INTERVAL=300000  # 5 minutes in milliseconds
NETWORK_TIMEOUT=5000          # 5 seconds

# =============================================================================
# ONVIF CONFIGURATION
# =============================================================================
# Default ONVIF credentials (can be overridden per camera)
ONVIF_USERNAME=admin
ONVIF_PASSWORD=your_onvif_password_here

# Discovery settings
ONVIF_DISCOVERY_TIMEOUT=5000    # 5 seconds
ONVIF_DISCOVERY_INTERVAL=60000  # 1 minute
ONVIF_PORT_RANGE_START=80
ONVIF_PORT_RANGE_END=8080

# Camera settings
CAMERA_CONNECTION_TIMEOUT=10000  # 10 seconds
CAMERA_RETRY_ATTEMPTS=3
CAMERA_RETRY_DELAY=5000         # 5 seconds

# =============================================================================
# LOGGING CONFIGURATION
# =============================================================================
LOG_LEVEL=info  # error, warn, info, debug
LOG_FILE=/var/log/siteguard/app.log
LOG_MAX_SIZE=10MB
LOG_MAX_FILES=5

# Enable/disable specific log types
LOG_HTTP_REQUESTS=true
LOG_DATABASE_QUERIES=false
LOG_WEBSOCKET_EVENTS=true
LOG_MEDIA_EVENTS=true

# =============================================================================
# DOMAIN AND CORS CONFIGURATION
# =============================================================================
# Update these with your actual domain
DOMAIN=your-domain.com
CORS_ORIGIN=https://your-domain.com
ALLOWED_ORIGINS=https://your-domain.com,https://www.your-domain.com

# Additional CORS settings
CORS_CREDENTIALS=true
CORS_MAX_AGE=86400  # 24 hours

# =============================================================================
# EMAIL CONFIGURATION (for alerts and notifications)
# =============================================================================
# SMTP settings for email notifications
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=your-email@gmail.com
SMTP_PASS=your-app-password

# Email settings
FROM_EMAIL=noreply@your-domain.com
ADMIN_EMAIL=admin@your-domain.com
ALERT_EMAIL=alerts@your-domain.com

# =============================================================================
# MONITORING AND ALERTS
# =============================================================================
# System monitoring thresholds
CPU_ALERT_THRESHOLD=80      # percentage
MEMORY_ALERT_THRESHOLD=80   # percentage
DISK_ALERT_THRESHOLD=85     # percentage
LOAD_ALERT_THRESHOLD=4.0    # load average

# Health check settings
HEALTH_CHECK_INTERVAL=30000  # 30 seconds
HEALTH_CHECK_TIMEOUT=5000    # 5 seconds

# =============================================================================
# BACKUP CONFIGURATION
# =============================================================================
# Backup settings
BACKUP_ENABLED=true
BACKUP_INTERVAL=daily  # daily, weekly, monthly
BACKUP_RETENTION_DAYS=7
BACKUP_PATH=/opt/siteguard/backups

# Remote backup (optional)
REMOTE_BACKUP_ENABLED=false
REMOTE_BACKUP_TYPE=s3  # s3, ftp, sftp
REMOTE_BACKUP_BUCKET=your-backup-bucket
REMOTE_BACKUP_ACCESS_KEY=your-access-key
REMOTE_BACKUP_SECRET_KEY=your-secret-key

# =============================================================================
# PERFORMANCE CONFIGURATION
# =============================================================================
# Node.js performance settings
NODE_OPTIONS=--max-old-space-size=2048

# Clustering
CLUSTER_ENABLED=false
CLUSTER_WORKERS=auto  # auto, or specific number

# Caching
CACHE_ENABLED=true
CACHE_TTL=300  # 5 minutes in seconds
CACHE_MAX_SIZE=100MB

# =============================================================================
# DEVELOPMENT/DEBUG SETTINGS (disable in production)
# =============================================================================
# Debug settings (set to false in production)
DEBUG_ENABLED=false
DEBUG_SQL=false
DEBUG_WEBSOCKETS=false

# API documentation
API_DOCS_ENABLED=false  # Disable Swagger/OpenAPI docs in production

# =============================================================================
# FEATURE FLAGS
# =============================================================================
# Enable/disable specific features
FEATURE_FACIAL_RECOGNITION=true
FEATURE_MOTION_DETECTION=true
FEATURE_AUDIO_RECORDING=true
FEATURE_CLOUD_STORAGE=false
FEATURE_MOBILE_PUSH=false
FEATURE_AI_ANALYTICS=true

# =============================================================================
# THIRD-PARTY INTEGRATIONS
# =============================================================================
# Webhook URLs for external integrations
WEBHOOK_ALERTS=https://your-webhook-url.com/alerts
WEBHOOK_EVENTS=https://your-webhook-url.com/events

# API keys for external services
WEATHER_API_KEY=your_weather_api_key
MAPS_API_KEY=your_maps_api_key
PUSH_NOTIFICATION_KEY=your_push_notification_key

# =============================================================================
# SSL/TLS CONFIGURATION
# =============================================================================
# SSL settings (managed by Let's Encrypt/Certbot)
SSL_ENABLED=true
SSL_CERT_PATH=/etc/letsencrypt/live/your-domain.com/fullchain.pem
SSL_KEY_PATH=/etc/letsencrypt/live/your-domain.com/privkey.pem

# HTTPS redirect
FORCE_HTTPS=true
HSTS_MAX_AGE=31536000  # 1 year in seconds

# =============================================================================
# TIMEZONE AND LOCALIZATION
# =============================================================================
TZ=UTC
LOCALE=en-US
DATE_FORMAT=YYYY-MM-DD HH:mm:ss

# =============================================================================
# CUSTOM CONFIGURATION
# =============================================================================
# Add any custom environment variables specific to your deployment below
# CUSTOM_SETTING_1=value1
# CUSTOM_SETTING_2=value2
